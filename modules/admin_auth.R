# nolint start
library(shiny)

# UI: shows a password box + login button

adminAuthUI <- function(id) {
  ns <- NS(id)
  tagList(
    passwordInput(ns("pwd"),   "Admin password:"),
    actionButton(ns("login"),  "Login", class = "btn-primary"),
    tags$hr()
  )
}

# Server: checks against a hard-coded password
# Returns a reactiveVal(TRUE/FALSE) for login status
adminAuthServer <- function(id, correct_pw = "secret123", updateStatus = NULL) {
  moduleServer(id, function(input, output, session) {
    observeEvent(input$login, {
      req(input$pwd)
      if (input$pwd == correct_pw) {
        if (!is.null(updateStatus)) updateStatus(TRUE)
        showNotification("🔓 Admin unlocked", type = "message")
      } else {
        showNotification("❌ Wrong password", type = "error")
      }
    })
  })

}

# nolint end